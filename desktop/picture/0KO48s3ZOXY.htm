
 


<!DOCTYPE html>
<html lang="zh-cn">
	<script>
		(function(){
			var ss = location.href;
			var m = ss.substring(ss.lastIndexOf("/")+1);
			if(screen.width <= 414){
			 	window.document.location.href="/newMaterialPagePhone/"+m+"";
			}
		})();
	</script>
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" >
	<title>这是情人眼里出西施的原因吗-GIF头条_GIF动态图-SOOGIF</title>
	<meta name="keywords" content="• 二次元世界 •,,动态图片,GIF新闻,GIF段子,搞笑GIF,搞笑动图,搞笑GIF动态图片,爆笑GIF图,有趣GIF,邪恶动态图">
	<meta name="description" content="这是情人眼里出西施的原因吗。SOOGIF每日为您奉上最新、有趣、搞笑GIF动图。">
	<link rel="stylesheet" href="http://www.soogif.com/css/animate.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/nav.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/footer.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/box-shaow.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/floating_content.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/sign-in.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/register.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/forget-pass.css">
	<link rel="stylesheet" href="http://www.soogif.com/css/float-content.css">
	<!--<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-6306917172755727",
	    enable_page_level_ads: true
	  });
	</script>-->
	<script type='text/javascript'>
	    // 友盟
	    // ydlx
	    // 2016-10-13
	    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://": " http://");
	    document.write(unescape("%3Cspan  style='display:none' id='cnzz_stat_icon_1260067336'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1260067336' type='text/javascript'%3E%3C/script%3E"));
	    // 百度统计
	  	// ydlx
	  	// 2016-9-28
	  	var _hmt = _hmt || [];
	  	(function() {
	      	var hm = document.createElement("script");
	      	hm.src = "//hm.baidu.com/hm.js?37c68c083c2c85fe183a5e0224eb35a9";
	      	var s = document.getElementsByTagName("script")[0]; 
	      	s.parentNode.insertBefore(hm, s);
	  	})();
		//声明_czc对象:
		var _czc = _czc || [];
		//绑定siteid，请用您的siteid替换下方"XXXXXXXX"部分
		_czc.push(["_setAccount", "1260067336"]);
		 
		// growing io
		// ydlx
		// 2016-8-9
	    var _vds = _vds || [];
	    window._vds = _vds;
	    (function(){
	       _vds.push(['setAccountId', 'beb66a1ac816845f']);
	       (function() {
	         var vds = document.createElement('script');
	         vds.type='text/javascript';
	         vds.async = true;
	         vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
	         var s = document.getElementsByTagName('script')[0];
	         s.parentNode.insertBefore(vds, s);
	      })();
	    })();
	</script>
</head>
<body>

	<!-- 这里是登录 -->
	
<!-- <c:set var="pageContext.request.contextPath" value="http://www.soogif.com" /> -->

<html>
	<div class="_Sign1">
		<div class="_Sign2">
			<div class="sign-logo"></div>
			<div class="sign-mode">
				<p class="_write">选择第三方登录方式</p>
				<div class="g1">
					<div class="top"></div>
					<p class="bottom">QQ</p>
				</div>
				<div class="g1">
					<div class="top"></div>
					<p class="bottom">微信</p>
				</div>
				<div class="g1">
					<div class="top"></div>
					<p class="bottom">微博</p>
				</div>
			</div>
			<div class="sign-input">
				<p class="phone-sign">手机登录</p>
				<div class="input-phone">
					<input id="si-phone" type="" name="" placeholder="请输入手机号">
					<div class="error">请输入正确的手机格式</div>
					<div class="not">该手机号未注册</div>
				</div>
				<div class="input-Password">
					<input id="si-pass" type="password" name="" placeholder="请输入不少于6位数密码">
					<div class="error">请输入6-20位密码，密码区分大小写</div>
					<div class="not">手机号或者密码输入有误</div>
				</div>
				<p class="forget-password"><span>忘记密码</span></p>
				<div class="sign-button">登录</div>
				<div class="prompt">还没有soogif账号，<span>快来注册</span></div>
				
			</div>
			<div class="sign-cancel"></div>
		</div>
	</div>
</html>

	<!-- 这里是注册 -->
	
<!-- <c:set var="pageContext.request.contextPath" value="http://www.soogif.com" /> -->

<html>
	<div class="_register1">
		<div class="_register2">
			<div class="sign-logo"></div>
			<div class="sign-mode">
				<p class="_write">选择第三方登录方式</p>
				<div class="g1">
					<div class="top"></div>
					<p class="bottom">QQ</p>
				</div>
				<div class="g1">
					<div class="top"></div>
					<p class="bottom">微信</p>
				</div>
				<div class="g1">
					<div class="top"></div>
					<p class="bottom">微博</p>
				</div>
			</div>
			<div class="sign-input">
				<p class="phone-sign">手机注册</p>
				<div class="input-phone">
					<input id="re-phone" type="" name="" placeholder="请输入手机号">
					<div class="error">请输入正确的手机格式</div>
					<div class="Already">
						<span class="ready1">手机号已存在</span>
						<span class="ready2">去登陆</span>
					</div>
				</div>
				<div class="Verification">
					<div class="left">
						<input id="pic-code" type="text" name="" placeholder="请输入图形验证码"/>
					</div>
					<div class="right">
						<img id="code-img" src="/authCode" />
						<div class="change"></div>
					</div>
					<div class="error">图形验证码错误</div>
				</div>
				<div class="phone-veri">
					<div class="left">
						<input id="msg-code" type="text" name="" placeholder="请输入短信验证码" />
					</div>
					<div class="right">
						<span class="re-send">重新发送(<b>299</b>)</span>
					</div>
					<div class="error">短信验证码错误</div>
				</div>
				<div class="input-Password">
					<input id="re-pass" type="password" name="" placeholder="请设置6-20位密码，区分大小写">
					<div class="error">请输入6-20位密码，密码区分大小写</div>
				</div>
				<div class="sign-button" id="sign-register">注册</div>
				<div class="prompt">已有账号，直接登陆</div>
			</div>
			<div class="sign-cancel"></div>
		</div>
	</div>
</html>

	<!-- 这里是忘记密码 -->
  	
<!-- <c:set var="pageContext.request.contextPath" value="http://www.soogif.com" /> -->

<html>
	<div class="_register4">
		<div class="_register3">
			<div class="sign-input">
				<div class="input-phone">
					<input id="re-phone2" type="" name="" placeholder="请输入注册使用的手机号码">
					<div class="error">请输入正确的手机格式</div>
					<div class="Already">
						<span class="ready1">手机号未注册</span>
						<span class="ready2">去注册</span>
					</div>
				</div>
				<div class="Verification">
					<div class="left">
						<input id="pic-code2" autocomplete="off" type="text" name="" placeholder="请输入图形验证码"/>
					</div>
					<div class="right">
						<img id="code-img2" src="/authCode" />
						<div class="change"></div>
					</div>
					<div class="error">图形验证码错误</div>
				</div>
				<div class="phone-veri">
					<div class="left">
						<input id="msg-code2" autocomplete="off" type="text" name="" placeholder="请输入短信验证码" />
					</div>
					<div class="right">
						<span class="re-send">重新发送(<b>299</b>)</span>
					</div>
					<div class="error">短信验证码错误</div>
				</div>
				<div class="input-Password">
					<input id="re-pass2" autocomplete="off" type="password" name="" placeholder="请设置6-20位密码，区分大小写">
					<div class="error">请输入6-20位密码，密码区分大小写</div>
				</div>
				<div class="sign-button" id="sign-register2">确定</div>
			</div>
			<div class="sign-cancel"></div>
		</div>
	</div>
	<div id="f-shade">
		<div class="f-con">
			<span class="f-close"></span>
			<p>密码修改成功!</p>
			<div class="f-btns">
				<span id="f-sure">确定</span>
			</div>
		</div>
	</div>
</html>

    <!-- 引用导航组件 -->
    
<!-- <c:set var="pageContext.request.contextPath" value="http://www.soogif.com" /> -->

<html>
	<div class="nav">
		<div class="box">
		    <div class="bo">
		    	<a href="/" class="logo">
		    		<img src="/images/img/img-home-page/logo.png" alt="">
		    	</a>
		        <div class="center">
			        <!-- 下面的a链接跳转到推荐 -->
			        <a href="/" class="a a-1">
			            <span class="recommend">推 &nbsp;&nbsp;荐</span>
			            <div class="after"></div>
			        </a>
			        <!-- 下面的a链接跳转到频道 -->
			        <a href="/sort/124" class="a a-2">
			            <span class="channels">频 &nbsp;&nbsp;道</span>
			            <div class="after"></div>
			        </a>
			        <a href="/shareSatin" class="a a-3">
			        	<span class="satin">GIF头条</span>
			        	<div class="after"></div>
			        </a>
			        <!-- 下面是链接 -->
			        <div class="_do wrap">
				        <a href="/compress" class="a a-4">
				        	工具制作
				        	<div class="after"></div>
				        </a>
				        <div class="tools">
				          	<a href="/compress">GIF压缩</a>
				          	<a href="/crop">GIF裁剪</a>
				          	<a href="/editor">GIF编辑</a>
				          	<a href="/video">视频转GIF</a>
				          	<a href="/gifTool">多图合成GIF</a>
				        </div>
			        </div>
			        <a href="http://open.soogif.com/" class="a a-5">
			          	<span class="_do">动图API</span>
			          	<div class="after"></div>
			        </a>
			        <a href="/platform" class="a a-6">
			        	<span>内容开放平台</span>
			        	<div class="after"></div>
			        </a>
			        <a href="/ip" class="a a-8">
			        	<span>动图百科</span>
			        	<div class="after"></div>
			        </a>
					<a href="/html/thematicmatch.html" class="a a-9">
			        	<span>世界杯</span>
			        	<div class="after"></div>
			        </a>
			        <!--<a href="/cooper" class="a a-8">
			        	<span>合作案例</span>
			        	<div class="after"></div>
			        </a>-->
			        <!-- <div class="a a-7">
			        	<span class="satin">合作案例展示</span>
			        </div> -->
		        </div>
		        <div class="function1"></div>
		    </div>
		</div>
		<div class="bu-right">
			<div class="right">
				<div class="bu-left clearfix">
					<div class="search-1">搜索</div>
			        <div class="search-wrap">
				        <!--<div class="c-sch clearfix">-->
	        		        <!--<div class="search-icon"></div>-->
	        	          	<!--<div class="focus" id="_focus"></div>-->
				        <!--</div>-->
			            <input type="" name="" class="in" id="in" placeholder="搜索你想要的GIF动图">
			            <!--<span id="in-con">搜索你想要的GIF动图</span>-->
			            <div class="searchWrap">
			            	<div class="search-hot">
			            		热门搜索
			            	</div>
			            	<div class="line"></div>
			            	<ul>
			            		<!--<li><span>1</span><a href="">传奇大亨</a></li>
			            		<li><span>2</span><a href="">传奇大亨</a></li>
			            		<li><span>3</span><a href="">传奇大亨</a></li>-->
			            	</ul>
				        </div>
			            <a href="/" class="pl-after">
			            	<img src="/images/img/img-home-page/logo.png" alt="">
			            </a>
			        </div>
	          	</div>
	        </div>
	        <div class="bottom">
	        	<div class="center">
	        		<div class="hot">热门搜索</div>
	        		<div class="c-sch clearfix">
	        		    <div class="search-icon"></div>
	        	      	<div class="focus" id="_focus"></div>
				    </div>
	        	</div>
	        </div>
	        
		</div>
	</div>

</html>

	<!-- 遮罩 -->
	
<!-- <c:set var="pageContext.request.contextPath" value="http://www.soogif.com" /> -->
<script type="text/javascript">

	window.onload = function (){
		// console.log(document.title)
		// console.log(document.getElementById('activeImg').getAttribute('src'))
		// console.log(window.location.href)
		
	
		document.getElementById('button_weixin').setAttribute("href", 'https://api.addthis.com/oexchange/0.8/forward/wechat/offer?url=http://www.soogif.com')
			// +  window.location.href +'&title='+ document.title);

		document.getElementById('button_cqq').setAttribute("href", 'https://connect.qq.com/widget/shareqq/index.html?url='+  window.location.href +'&title='+ document.title+'&pics=http://www.soogif.com/images/img/img-home-page/logo.png');

		document.getElementById('button_tsina').setAttribute("href", 'http://v.t.sina.com.cn/share/share.php?url='+  window.location.href +'&title='+ document.title+'&pics=http://www.soogif.com/images/img/img-home-page/logo.png');

		document.getElementById('button_qzone').setAttribute("href", 'https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+  window.location.href + '&title='+ document.title+'&pics=http://www.soogif.com/images/img/img-home-page/logo.png');
	}
</script>
<html>
	<div class="box-shaow">
		<div class="central clearfix" imgid="11">
			<div class="central-left clearfix">
				<div class="new-add">
					<div class="top">
						<figure class="_dg">
							<div class="_ii"></div>
						</figure>
						<div class="pre" id="_pre"></div>
						<div class="nex" id="_nex"></div>
						<div class="collection-care"></div>
					</div>
					<div class="cen clearfix">
						<span class="jump">+1</span>
						<div class="mess"></div>
						<div class="fabulous">
							<div class="numb"></div>
						</div>
						<div class="le clearfix"></div>		
					</div>
				</div>
				<div class="bottom">
					<div class="prison">
						<!-- <a href="" class="prison_1"></a>
						<span class="prison2"></span> -->
					</div>
					<div class="flg clearfix">
						<div class="flg-down flg-active">无水印下载</div>
						<div class="flg-make ">工具</div>
					</div>
					<div class="con-down">
						<div class="downloaded clearfix">
							<div class="included">
								<a href="javascript:void(0)" class="load load-1 downloadImg1" downloadtype="1024">表情包下载&lt;1M</a>
							</div>
							<div class="included">
								<a href="javascript:void(0)" class="load load-2 downloadImg1" downloadtype="2048">公众号下载&lt;2M</a>
							</div>
							<div class="included">
								<a href="javascript:void(0)" class="load load-3 downloadImg1" downloadtype="0">原图下载</a> 
							</div>
						</div>
					</div>
					<div class="con-make">
						<div class="gif-1 gif-crop">GIF裁剪</div>
						<div class="gif-1 gif-editor">GIF编辑</div>
						<a href="https://yiban.io/soogif_landing" target="_black" class="gif-1">一键传至公众号</a>
					</div>
					<div class="share clearfix">
						<div class="share-left">
							<a href="javascript:void(0)">分享：</a>
						</div>
						<div class="share-right clearfix"">
							<!-- <a href="javascript:void(0)" class="jiathis_button_weixin">
								<div title="微信" class="share-right1"></div>
							</a>
							<a href="javascript:void(0)" class="jiathis_button_cqq">
								<div title="qq" class="share-right2"></div>
							</a>
							<a href="javascript:void(0)" class="jiathis_button_tsina">
								<div title="微博" class="share-right3"></div>
							</a>
							<a href="javascript:void(0)" class="jiathis_button_qzone">
								<div title="qq空间" class="share-right4"></div>
							</a> -->
							<a href="javascript:void(0)" class="button_weixin" id="button_weixin">
								<div title="微信" class="share-right1"></div>
							</a>
							<a href="javascript:void(0)" class="button_cqq" id="button_cqq">
								<div title="qq" class="share-right2"></div>
							</a>
							<a href="javascript:void(0)" class="button_tsina" id="button_tsina">
								<div title="微博" class="share-right3"></div>
							</a>
							<a href="javascript:void(0)" class="button_qzone" id="button_qzone">
								<div title="qq空间" class="share-right4"></div>
							</a>
						</div>
					</div>
					<div class="tpsysm">
						<div class="tpsysm-once">图片使用说明：</div>
						<div class="tpsysm-twice">新媒体图文使用动图，请标注“<span>动图来自SOOGIF</span>”</div>
						<a class="tpsysm-xieyi" href="http://www.soogif.com/html/website/Agreement.html" target="_blank">SOOGIF用户服务协议</a>
					</div>
				</div>
			</div>
			<!--<div class="relevant-left"></div>
			<div class="relevant">
				<div class="central-right clearfix">
					<div class="aside"><figure><div class="_hr"></div></figure></div>
					<div class="aside"><figure><div class="_hr"></div></figure></div>
					<div class="aside"><figure><div class="_hr"></div></figure></div>
					<div class="aside"><figure><div class="_hr"></div></figure></div>
					<div class="aside"><figure><div class="_hr"></div></figure></div>
				</div>
			</div>
			<div class="relevant-right"></div>-->
			
			<div class="opcity"></div>
		</div>
		<div class="moreimg-text">更多相似图片</div>
		<div class="_will">
			<div id="container-float">

			</div>
		</div>

</html>

	<!-- 底部 -->
      

<html>
	<!-- 这里是底部导航 -->
	<div class="footer">
		<div class="center clearfix">
			<div class="left clearfix">
				<a href="/html/website/friendship.html" class="z-1">友情链接</a>
				<a href="/html/website/Agreement.html" class="z-1">用户服务协议</a>
				<a href="/aboutus" class="z-1">关于我们</a>
				<a href="/telus" class="z-1">加入我们</a>
				<p class="z-1">联系我们</p>
			</div>
			<div class="between clearfix">
				<span class="codes-1">
					<div class="codes"></div>
				</span>
				<span class="codes-2">
					<div class="codes"></div>
				</span>
				<a href="http://weibo.com/shenmeguijj" class="codes-3"></a>
			</div>
			<div class="right">
				<p class="mail">邮箱：official@whatthehell.cn</p>
				<p class="url">沪ICP备31010502001330号</p>
			</div>
		</div>
	</div>
</html>>

	<!-- 动画 -->
	<div class="_load"></div>

	<!-- 没有更多了 -->
	<div class="_nomore">
		<div class="_left"></div>
		<p class="_center">没有更多了</p>
		<div class="_right"></div>
	</div>

    <!-- 提示已经点赞 -->
    <div class="prompt">已经点过赞了</div>
    <div class="baidurb-left">
    	<!--<script type="text/javascript">
		    var cpro_id = "u3186317";
		</script>
		<script type="text/javascript" src="//cpro.baidustatic.com/cpro/ui/c.js"></script>-->
		
		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<ins class="adsbygoogle"
		     style="display:inline-block;width:140px;height:350px"
		     data-ad-client="ca-pub-6306917172755727"
		     data-ad-slot="9188972427"></ins>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script>
    </div>
	<script src="/js/jquery.min.js"></script>
	<script src="/js/core.js"></script>
	<script src="/js/cipher-core.js"></script>
	<script src="/js/tripledes.js"></script>
	<script src="/js/mode-ecb.js"></script>
	<script src="/js/state.js"></script>
	<script src="/js/waterfall.js"></script>
	<script>
		$('#container-float').waterfall({
		    itemCls: 'item',
		    colWidth: 276,  
		    gutterWidth: 16,
		    gutterHeight: 16,
		    $container:null
		});
	</script>
	<script src="http://v3.jiathis.com/code/jia.js"></script>
	<script src="/js/imagesLoaded.js"></script>
	<script src="/js/plug.js"></script>
	<script src="/js/nav.js"></script>
	<script src="/js/public.js"></script>
	<script src="/js/register.js"></script>
	<script src="/js/forget-pass.js"></script>
	<script src="/js/sign-in.js"></script>
	<script src="/js/count/count-public.js"></script>
	<script src="/js/website/relevant-lunbo.js"></script>
	<script>
		var jiathis_config = {};
		$(function(){
            var flag = false;
//          alert(flag);
			//需要加密的内容
//      let str1 = encryptByDES('helloworld');
//      let str2 = decryptByDESModeEBC(str1);
//      console.log(str1.toString())
//      console.log(str2)

        //加密的私钥
        var key = '12345678';
        // DES加密
        function encryptByDES(message) {
            //把私钥转换成16进制的字符串
            var keyHex = CryptoJS.enc.Utf8.parse(key);
            //模式为ECB padding为Pkcs7
            var encrypted = CryptoJS.DES.encrypt(message, keyHex, {
                mode: CryptoJS.mode.ECB,
                padding: CryptoJS.pad.Pkcs7
            });
            //加密出来是一个16进制的字符串
            return encrypted.ciphertext.toString();

        }
			
			var data_result = [];
			// 登录状态
			if(window.localStorage["state"] == 1){ 
				accpt();
			}else{
				getImg('0KO48s3ZOXY');
			}

			// 点赞功能
			$('body').on('click','.fabulous',function(event){
				var imgId = $('.box-shaow .central').attr('imgid');
				var zan = $(this).find('.numb').html();
				zan = parseInt(zan);
				$this = $(this);
				$.post('/addgoods',{imgId:imgId},function(result){
					if(result.msg == '点赞成功'){
						if($('.jump').hasClass('_load')){
							$('.jump').removeClass('_load')
							$('.jump').addClass('_load1')
						}else{ 
							$('.jump').removeClass('_load1')
							$('.jump').addClass('_load');
						}
						$this.find('.numb').html(zan+1);
					}else{
						$('.prompt').css({'z-index':'1000','opacity':'1'});
						setTimeout(function(){
							$('.prompt').css({'opacity':'0','z-index':'1'});
						},1000);
					}
				})
			})

		    // 下载图片
			$(document).on("click", ".downloadImg", function() {
				var type = $(this).attr('downloadType');
				var id = $(".central").attr('imgId');
				location.href="/download/"+type+"/"+id;
			});

			// 遮罩右边的小图点击
			var $activeImg = null;
			$(document).on('click','.aside',function(){
				$activeImg = $(this);
				var id = $activeImg.attr('imgId');
				getImg(id);
			});

			//点击gif裁剪
			$(".con-make .gif-1.gif-crop").click(function(){ 
				var _src = $("#activeImg").attr("src");
				_src = _src.replace(".mp4",".gif")
				if(_src){ 
					var link = document.createElement("a");
					link.target = "_blank";
					link.href = "http://www.soogif.com/crop?url="+_src;
					document.body.appendChild(link);
					link.click();
					document.body.removeChild(link);
					delete link;
				}
			});
			//点击gif编辑//点击gif裁剪
			$(".con-make .gif-1.gif-editor").click(function(){ 
				var _src = $("#activeImg").attr("src");
				_src = _src.replace(".mp4",".gif")
				if(_src){ 
					var link = document.createElement("a");
					link.target = "_blank";
					link.href = "http://www.soogif.com/editor?url="+_src;
					document.body.appendChild(link);
					link.click();
					document.body.removeChild(link);
					delete link;
				}
			});

			// 弹窗工具下载切花
			$('.box-shaow .central-left .bottom .flg-down').click(function(){
				$('.box-shaow .central-left .bottom .flg-make').removeClass('flg-active');
				$('.box-shaow .central-left .bottom .flg-down').addClass('flg-active');
				$('.con-down').css('display','block');
				$('.con-make').css('display','none');
			})
			$('.box-shaow .central-left .bottom .flg-make').click(function(){
				$('.box-shaow .central-left .bottom .flg-down').removeClass('flg-active');
				$('.box-shaow .central-left .bottom .flg-make').addClass('flg-active');
				$('.con-down').css('display','none');
				$('.con-make').css('display','block');
			})

			// 收藏大心
			$('.box-shaow .central-left .top .collection-care').click(function(){
				if(window.localStorage["state"] == 1){
					$(this).toggleClass('this-care');
					var user_id = window.localStorage["id"];
					if($(this).siblings('figure').find('img').attr('src')){
						var _link = $(this).siblings('figure').find('img').attr('src').replace('_s400x0','');
					}else{
						var _link = $(this).siblings('figure').find('video').attr('src').replace('.mp4','.gif');
					}
//					var _link = $(this).siblings('figure').find('img').attr('src').replace('_s400x0','');
					var link_height = $(this).siblings('figure').attr('data-massage');
					var imageId = $('.box-shaow .central').attr('imgId');
					var tag = 1;
					if($(this).hasClass('this-care')){
						Collection(user_id,_link,link_height,imageId,tag)
						// console.log('增加')
					}else{
						dele(user_id,_link)
						// console.log('删除')
					}
				}else{
					$('._Sign1').css('display','block');
				}
			})

			// 收藏心封住函数
			function Collection(user_id,_link,link_height,imageId,tag){
				$.ajax({
					url:'/addmycollect',
					type:'post',
					dataType:'json',
					data:{
						parentId:user_id,
						collectImgUrl:_link,
						hight:link_height,
						imageId:imageId,
						tag:tag
					},
					success:function(result){
						accpt();
					}
				}) 
			}

			// 收藏的gif删除封装函数
			function dele(user_id,_link){
				$.ajax({
					url:'/cancle',
					type:'post',
					dataType:'json',
					data:{
						parentId:user_id,
						imgUrl:_link
					},
					success:function(result){
						accpt();
					}
				})
			}

			//渲染页面 
			function getImg(id){
				$(".central").attr("imgId",id);
				var date = new Date();
			    date.setTime(date.getTime()+30*1000);
				var timesc = new Date().getTime()
				timesc = timesc.toString();
				let str1 = encryptByDES(timesc);
				document.cookie="YF-Ugrow-G0="+str1 + "; expires = " + date.toGMTString();
				// 大图
				$.ajax({
					dataType:'json',
					type:'GET',
					url:"/newMaterialJson/" + id,
					success:function(result){
						if(result.code!=0){
							return;
						}
						var material = result.data.newmaterial;
						if(window.localStorage["state"] == 1){
							if(data_result.indexOf(material.gifurl.replace('_s400x0','')) !== -1){
								$('.box-shaow .central-left .top .collection-care').addClass('this-care');
							}else{
								$('.box-shaow .central-left .top .collection-care').removeClass('this-care');
							}
						}
						// 下面是文字
						var html = "";
						html = material.likeNum;
						$('.numb').html(html);
						if(material.label){
							$.each(material.label,function(n,v){
								if(v&&n<4){
									html += '<a href="/shareSatin?id='+v.id+'" class="labelled search_query">'+v.name+'</a>';
								}
							});
						}
						$('.box-shaow .central-left .top figure').attr('data-massage',Math.round((material.height/material.width)*288)); 
						$('.box-shaow .central-left .top figure').attr('data-dd',material.id);
						$(".insert").attr("href","http://www.135editor.com/?action=appendimg&uri="+material.url);
						$(".box-shaow .central-left .le").html(html);

						var material2 = result.data.author;
						
						if(material2.nickname && material2.face){
							var auth = '<a href="/html/website/author.html?uid='+material2.id+'" target="_blank" class="prison_1"><img src="'+material2.face+'"></a><span class="prison2">'+material2.nickname+'</span>'
							window.localStorage["user-name"] = material2.nickname;
							$('.box-shaow .central-left .bottom .prison').html(auth);
						}else{
							window.localStorage["user-name"] = material2.nickname;
							$('.box-shaow .central-left .bottom .prison').html('');
						}
				
//						console.log(material)
						if(material.mp4Status == 0){
							var aaa = material.gifurl.substr(-3,3);
							if(aaa == 'gif'){
								material.gifurl1 = material.gifurl.replace(".gif",".mp4")
							}else{
								material.gifurl1 = material.gifurl + ".mp4";
							}
//							material.url = material.gifurl.replace(".gif",".mp4")
							var html1 = '<video src="'+material.gifurl1+'" id="activeImg" class="test" loop="loop" autoplay="autoplay">'
							$('.box-shaow .central-left .top figure').html(html1)
							if(flag){
								var htmlf = '<a href="https://giphy.com/" class="catente" target="_blank"><img src="/images/img/box-shaow/catente.png"/></a>'
								$('.box-shaow .central-left .top figure').append(htmlf)
							}else{
								var htmlf = '<a href="http://www.soogif.com/" class="catente" target="_blank"><img src="/images/img/box-shaow/catente.png"/></a>'
								$('.box-shaow .central-left .top figure').append(htmlf)
							}
							$('._ii').css('display','none');
							$('#activeImg').css('display','block');
						}
						if(material.mp4Status == 1){
							$('#activeImg').imagesLoaded(function(){
								$('._ii').css('display','none');
								$('#activeImg').css('display','block');
								var mgif = '<img src="'+material.gifurl+'" alt="" id="activeImg" class="test">';
								$('._dg').html(mgif);
								if(flag){
									var htmlf = '<a href="https://giphy.com/" class="catente" target="_blank"><img src="/images/img/box-shaow/catente.png"/></a>'
									$('.box-shaow .central-left .top figure').append(htmlf)
								}else{
									var htmlf = '<a href="http://www.soogif.com/" class="catente" target="_blank"><img src="/images/img/box-shaow/catente.png"/></a>'
									$('.box-shaow .central-left .top figure').append(htmlf)
								}
							});
						}
//						
						jiathis_config.url = "http://www.soogif.com/newMaterialPage/"+id;
						jiathis_config.pic = material.gifurl;
						jiathis_config.summary = ' '
					}
				});
			}
			// 为遮罩封装函数在这里结束

			// 登录状态
			if(window.localStorage["state"] == 1){
				var data_result = []; 
				$.ajax({
					url:'/show',
					type:'post',
					dataType:'json',
					data:{
						parentId:window.localStorage["id"]
					},
					success:function(result){
						var list = result.result;
						$.each(list,function(a,b){
							data_result.push(b.collectImgUrl.replace('_s400x0',''));
						});
						console.log(data_result);
						// 页面初步加载
				        findThemeGif('0KO48s3ZOXY',0,function(html){
				        	var $elems = $(html);
				        	$elems.imagesLoaded(function(){
					            $('#container-float').waterfall('append', $elems, function(){
					            	$('.footer').css('display','block');
					            });
				          	});
				        });
					}
				})
			}else{
				// 页面初步加载
		        findThemeGif('0KO48s3ZOXY',0,function(html){
		        	var $elems = $(html);
		        	$elems.imagesLoaded(function(){
			            $('#container-float').waterfall('append', $elems, function(){
			            	$('.footer').css('display','block');
			            });
		          	});
		        });
			}

			// 滚动条滚动异步加载页面
			  var falg = true;
			  var _ST = 0;
			$(window).scroll(function(){
				// console.log($(document).height())
				// console.log($(this).scrollTop())
				// console.log($(this).height())
			    if ($(document).height() - $(this).scrollTop() - $(this).height() < 300){
			        if ($("._nomore").css("display") !== "none") {
			           	$('._load').css('display', 'none');
			           	falg = false;
					};
				    if (falg){
						falg = false;
						_ST = $('.item').length;
				        findThemeGif('0KO48s3ZOXY',_ST,function(html){
				        	var $elems = $(html);
//				        	$elems.imagesLoaded(function() {
					            $('#container-float').waterfall('append', $elems, function(){
					            	
					            });
					            $('._loadback').css('opcity', '1');
					            $('._load').css('display', 'block');
					            if ($("._nomore").css('display') == "none") {
					              	falg = true;
					            };
//				          	});
				        });
				    };
			    };
			});

			//瀑布流滚动加载封装函数
			function findThemeGif(id, _ST, func){
			    var size = 20;
			    var html = "";
			    $(document).ajaxStart(function(){
			      	$('._load').css('display', 'block');
			    });
			    var date = new Date();
			    date.setTime(date.getTime()+30*1000);
			    var timesc = new Date().getTime()
			    timesc = timesc.toString();
			    let str1 = encryptByDES(timesc);
			    document.cookie="YF-Ugrow-G0="+str1 + "; expires = " + date.toGMTString() + "; path = /themeMaterials";
//			    alert(str1)
			    $.ajax({
				    dataType:'json',
					type:'GET',
					url:'/material/recommend',
					data:{pid:id,size:8,_ST:_ST},
				    success: function(result){
				        if (result.code == 0) {
//				        	console.log('记载')
					        var list = result.data.list;
					        //没有更多了
					        if (result.data.total == 0) {
					            $('._load').css('display','none');
					            $("._nomore").css('display','block');
					        };
					        $.each(list,function(i, n){
    	                    	var arr = ['#15CAFA','#F3395B','#40CC66','#EEDA0C','#00D339'] 
    							var res = [];
    							for (var x = 0, len = arr.length; x < len; x++){
    							  	var j = Math.floor(Math.random() * arr.length);
    							  	res[x] = arr[j];
    							  	arr.splice(j, 1);
    							}
					        	if(n.height == undefined){
    		                    	var _loopwidth = '';
    		                    	if(n.size < 500*1024){
    		                    		_loopwidth = '200'
    		                    	}else if(n.size >= 500*1024 && n.size < 1000*1024){
    		                    		_loopwidth = '220'
    		                    	}else if(n.size >= 1000*1024 &&n.size < 2000*1024){
    		                    		_loopwidth = '240'
    		                    	}else if(n.size >= 2000*1024 && n.size < 3000*1024){
    		                    		_loopwidth = '280' 
    		                    	}else if(3000*1024 >= n.size){
    		                    		_loopwidth = '300'
    		                    	}else{
    		                    		_loopwidth = '300';
    		                    	}
    		                        html += '<a href="/materialPage/'+n.sid+'" title="'+n.subText+'" class="item T-show prev-sort" style="height:'+_loopwidth+'px;background:'+res[2]+'" imgId=' + n.sid + ' click_from ="theme">';
					        	}else{
    								html += '<a href="/materialPage/'+n.sid+'" title="'+n.subText+'" class="item T-show prev-sort" style="height:'+n.height*288/n.width+'px;background:'+res[2]+'" imgId=' + n.sid + ' click_from ="theme">';
					        	}
                                html += '<figure>';
                                var url = n.url;
//                              if (n.size > 20 * 1000 * 1000) {
//                                  url = n.url + "_new";
//                              }

                                html += '</figure>';
                                html += '<div class="care">'
                                if(window.localStorage["state"] == 1){
                                	if(data_result.indexOf(url) !== -1){
                                		html += '<div class="care1 care2" id="_care"></div>'
                                	}else{
                                		html += '<div class="care1" id="_care"></div>'
                                	}
                                }else{
                                	html += '<div class="care1" id="_care"></div>'
                                }
					  			html +=	'</div>'
                                html +='<div class="shaow">'
                                if(n.subText == undefined){
                                	html += '<span></span>'
                                }else{
                                	$.each(n.subText.split(" "),function(a,v){
                                		if(a < 3 && v !== ""){
                                			html += '<span>#'+v+'</span>'
                                		}
                                	})
                                }
                                html += '</div>'
                                html += '</a>';
                                setTimeout(function(){
//                              	if(n.mp4Status == 0){
//                              		var aaa = url.substr(-3,3);
//										if(aaa == 'gif'){
//											url = url.replace(".gif",".mp4")
//										}else{
//											url = url + ".mp4";
//										}
//		                        		var _imgStr = '<video src="' + url + '" style="height:100%;object-fit:cover;" alt="' + (n.subText ? n.subText: "") + '" loop="loop" autoplay="autoplay" class="video"/>';
//		                        	}
//                              	if(n.mp4Status == 1){
		                        		var _imgStr = '<img src="' + url + '_s400x0" style="height:100%;object-fit:cover;" alt="' + (n.subText ? n.subText: "") + '"/>';
//		                        	}
//                              	url = url.replace(".gif",".mp4");
//                              	var _imgStr = '<video src="' + url + '" style="height:100%;object-fit:cover;" alt="' + (n.subText ? n.subText: "") + '" loop="loop" autoplay="autoplay" class="video"/>';
//                              	var _imgStr = '<img src="' + url + '_s400x0" style="height:100%;object-fit:cover;" alt="' + (n.subText ? n.subText: "") + '"/>';
                                	$(".item[imgId='"+n.sid+"']").find("figure").html(_imgStr);
                                },1000);
					        });
				        };
				        func(html);
//				        var video = $('.video');
//				        for(var i=0;i<video.length;i++){
//				        	video[i].play();
//				        }
				    }
			    });
			  // 封装函数在这里结束 
			};

			// 登录接收收藏数据
			function accpt(){
				$.ajax({
					url:'/show',
					type:'post',
					dataType:'json',
					data:{
						parentId:window.localStorage["id"]
					},
					success:function(result){
						data_result = [];
						var list = result.result;
						$.each(list,function(a,b){
							data_result.push(b.collectImgUrl.replace('_s400x0',''));
						});
						getImg('0KO48s3ZOXY');
						
					}
				})
			}

		    // 本次js在这里结束
		});
	</script>
</body>
</html>